<div>
    @model IEnumerable<TrouveUnBand.Models.Advert>

    @{
        ViewBag.Title = "Annonces";
    }
    <div class="form-group col-md-12">
        <div class="col-md-8">
            <h2>Annonces</h2>
        </div>
        <div class="col-md-4">
            @if(User.Identity.Name != "")
            {
                @Html.ActionLink("Nouvelle Annonce", "Create", new { controller = "Advert" }, new { @class="btn btn-primary col-md-6 col-md-pull-1" })
                @Html.ActionLink("Mes Annonces", "MyAdverts", new { controller = "Advert" }, new { @class = "btn btn-primary col-md-6" })
            }
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-12">
            <hr class="colorgraph">
        </div>
        @foreach (var item in Model)
        {
            if (item.Status == "En cours")
            {
                <div class="col-md-12">
                    <div class="row col-md-4 form-group">
                        <img src="@item.Photo" width="250" class="photo" alt="Image">
                    </div>
                    <div class="col-md-8 col-md-pull-1" id="AdvertDesc">
                        <div class="col-md-12 form-group">
                            <h3>@Html.DisplayName(item.Type)</h3>
                        </div>
                        <div class="col-md-3 form-group">
                            <span class="glyphicon glyphicon-calendar"></span> @Html.DisplayName(item.CreationDate.ToString("dd MMMM yyyy"))
                        </div>
                        <div class="col-md-3 form-group">
                            <span class="glyphicon glyphicon-music"></span> @Html.DisplayName(item.Genres.FirstOrDefault().Name)
                        </div>
                        <div class="col-md-3 form-group col-md-pull-1">
                            <span class="glyphicon glyphicon-map-marker"></span>@Html.DisplayName(item.Location)
                        </div>
                        <div class="col-md-3 form-group col-md-pull-2">
                            <span class="glyphicon glyphicon-ok"></span> @Html.DisplayName(item.Status)
                        </div>
                        <div class="col-md-12 form-group">
                            <hr class="colorgraph" />
                            @Html.TextArea("DescriptionArea", item.Description, new { @class = "form-control", @readonly = "readonly", @rows = "6" })
                        </div>
                        @if (item.User.Nickname == User.Identity.Name)
                        {
                            <div class="col-md-4">
                                @Html.ActionLink("Modifier l'annonce", "Edit", new { id = item.Advert_ID }, new { @class = "btn btn-primary col-md-12" })
                            </div>
                            <div class="col-md-4">
                                @Html.ActionLink("Fermer l'annonce", "Close", new { id = item.Advert_ID }, new { @class = "btn btn-warning col-md-12" })
                            </div>
                            <div class="col-md-4">          
                                @Html.ActionLink("Supprimer l'annonce", "Delete", new { id = item.Advert_ID }, new { @class = "btn btn-danger col-md-12" })
                            </div>
                        }
                    </div>
                </div>
                <div class="col-md-12">
                    <hr class="colorgraph">
                </div>
            }
        }
    </div>
</div>
